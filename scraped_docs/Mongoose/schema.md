# Schema


# Schema

[Mongoose](mongoose.html)

[Schema](schema.html)


Schema()Schema.TypesSchema.indexTypesSchema.prototype.add()Schema.prototype.alias()Schema.prototype.childSchemasSchema.prototype.clearIndexes()Schema.prototype.clone()Schema.prototype.discriminator()Schema.prototype.eachPath()Schema.prototype.get()Schema.prototype.index()Schema.prototype.indexes()Schema.prototype.loadClass()Schema.prototype.method()Schema.prototype.objSchema.prototype.omit()Schema.prototype.path()Schema.prototype.pathType()Schema.prototype.pathsSchema.prototype.pick()Schema.prototype.plugin()Schema.prototype.post()Schema.prototype.pre()Schema.prototype.queue()Schema.prototype.remove()Schema.prototype.removeIndex()Schema.prototype.removeVirtual()Schema.prototype.requiredPaths()Schema.prototype.searchIndex()Schema.prototype.set()Schema.prototype.static()Schema.prototype.virtual()Schema.prototype.virtualpath()Schema.prototype.virtualsSchema.reserved

- Schema()

`Schema()`
- Schema.Types

`Schema.Types`
- Schema.indexTypes

`Schema.indexTypes`
- Schema.prototype.add()

`Schema.prototype.add()`
- Schema.prototype.alias()

`Schema.prototype.alias()`
- Schema.prototype.childSchemas

`Schema.prototype.childSchemas`
- Schema.prototype.clearIndexes()

`Schema.prototype.clearIndexes()`
- Schema.prototype.clone()

`Schema.prototype.clone()`
- Schema.prototype.discriminator()

`Schema.prototype.discriminator()`
- Schema.prototype.eachPath()

`Schema.prototype.eachPath()`
- Schema.prototype.get()

`Schema.prototype.get()`
- Schema.prototype.index()

`Schema.prototype.index()`
- Schema.prototype.indexes()

`Schema.prototype.indexes()`
- Schema.prototype.loadClass()

`Schema.prototype.loadClass()`
- Schema.prototype.method()

`Schema.prototype.method()`
- Schema.prototype.obj

`Schema.prototype.obj`
- Schema.prototype.omit()

`Schema.prototype.omit()`
- Schema.prototype.path()

`Schema.prototype.path()`
- Schema.prototype.pathType()

`Schema.prototype.pathType()`
- Schema.prototype.paths

`Schema.prototype.paths`
- Schema.prototype.pick()

`Schema.prototype.pick()`
- Schema.prototype.plugin()

`Schema.prototype.plugin()`
- Schema.prototype.post()

`Schema.prototype.post()`
- Schema.prototype.pre()

`Schema.prototype.pre()`
- Schema.prototype.queue()

`Schema.prototype.queue()`
- Schema.prototype.remove()

`Schema.prototype.remove()`
- Schema.prototype.removeIndex()

`Schema.prototype.removeIndex()`
- Schema.prototype.removeVirtual()

`Schema.prototype.removeVirtual()`
- Schema.prototype.requiredPaths()

`Schema.prototype.requiredPaths()`
- Schema.prototype.searchIndex()

`Schema.prototype.searchIndex()`
- Schema.prototype.set()

`Schema.prototype.set()`
- Schema.prototype.static()

`Schema.prototype.static()`
- Schema.prototype.virtual()

`Schema.prototype.virtual()`
- Schema.prototype.virtualpath()

`Schema.prototype.virtualpath()`
- Schema.prototype.virtuals

`Schema.prototype.virtuals`
- Schema.reserved

`Schema.reserved`
[Connection](connection.html)

[Document](document.html)

[Model](model.html)

[Query](query.html)

[QueryCursor](querycursor.html)

[Aggregate](aggregate.html)

[AggregationCursor](aggregationcursor.html)

[SchemaType](schematype.html)

[VirtualType](virtualtype.html)

[Error](error.html)

[SchemaArray](schemaarray.html)

[SchemaDocumentArray](schemadocumentarray.html)

[SchemaSubdocument](schemasubdocument.html)

[SchemaBoolean](schemaboolean.html)

[SchemaBuffer](schemabuffer.html)

[SchemaNumber](schemanumber.html)

[SchemaObjectId](schemaobjectid.html)

[SchemaString](schemastring.html)

[DocumentArray](documentarray.html)

[Subdocument](subdocument.html)

[ArraySubdocument](arraysubdocument.html)

[Buffer](buffer.html)

[Decimal128](decimal128.html)

[Map](map.html)

[Array](array.html)


Schema()Schema.TypesSchema.indexTypesSchema.prototype.add()Schema.prototype.alias()Schema.prototype.childSchemasSchema.prototype.clearIndexes()Schema.prototype.clone()Schema.prototype.discriminator()Schema.prototype.eachPath()Schema.prototype.get()Schema.prototype.index()Schema.prototype.indexes()Schema.prototype.loadClass()Schema.prototype.method()Schema.prototype.objSchema.prototype.omit()Schema.prototype.path()Schema.prototype.pathType()Schema.prototype.pathsSchema.prototype.pick()Schema.prototype.plugin()Schema.prototype.post()Schema.prototype.pre()Schema.prototype.queue()Schema.prototype.remove()Schema.prototype.removeIndex()Schema.prototype.removeVirtual()Schema.prototype.requiredPaths()Schema.prototype.searchIndex()Schema.prototype.set()Schema.prototype.static()Schema.prototype.virtual()Schema.prototype.virtualpath()Schema.prototype.virtualsSchema.reserved

- Schema()

`Schema()`
- Schema.Types

`Schema.Types`
- Schema.indexTypes

`Schema.indexTypes`
- Schema.prototype.add()

`Schema.prototype.add()`
- Schema.prototype.alias()

`Schema.prototype.alias()`
- Schema.prototype.childSchemas

`Schema.prototype.childSchemas`
- Schema.prototype.clearIndexes()

`Schema.prototype.clearIndexes()`
- Schema.prototype.clone()

`Schema.prototype.clone()`
- Schema.prototype.discriminator()

`Schema.prototype.discriminator()`
- Schema.prototype.eachPath()

`Schema.prototype.eachPath()`
- Schema.prototype.get()

`Schema.prototype.get()`
- Schema.prototype.index()

`Schema.prototype.index()`
- Schema.prototype.indexes()

`Schema.prototype.indexes()`
- Schema.prototype.loadClass()

`Schema.prototype.loadClass()`
- Schema.prototype.method()

`Schema.prototype.method()`
- Schema.prototype.obj

`Schema.prototype.obj`
- Schema.prototype.omit()

`Schema.prototype.omit()`
- Schema.prototype.path()

`Schema.prototype.path()`
- Schema.prototype.pathType()

`Schema.prototype.pathType()`
- Schema.prototype.paths

`Schema.prototype.paths`
- Schema.prototype.pick()

`Schema.prototype.pick()`
- Schema.prototype.plugin()

`Schema.prototype.plugin()`
- Schema.prototype.post()

`Schema.prototype.post()`
- Schema.prototype.pre()

`Schema.prototype.pre()`
- Schema.prototype.queue()

`Schema.prototype.queue()`
- Schema.prototype.remove()

`Schema.prototype.remove()`
- Schema.prototype.removeIndex()

`Schema.prototype.removeIndex()`
- Schema.prototype.removeVirtual()

`Schema.prototype.removeVirtual()`
- Schema.prototype.requiredPaths()

`Schema.prototype.requiredPaths()`
- Schema.prototype.searchIndex()

`Schema.prototype.searchIndex()`
- Schema.prototype.set()

`Schema.prototype.set()`
- Schema.prototype.static()

`Schema.prototype.static()`
- Schema.prototype.virtual()

`Schema.prototype.virtual()`
- Schema.prototype.virtualpath()

`Schema.prototype.virtualpath()`
- Schema.prototype.virtuals

`Schema.prototype.virtuals`
- Schema.reserved

`Schema.reserved`

### Schema()

[Schema()](#Schema())

`Schema()`

[definition]«Object|Schema|Array»Can be one of: object describing schema paths, or schema to copy, or array of objects and schemas[options]«Object»

- [definition]«Object|Schema|Array»Can be one of: object describing schema paths, or schema to copy, or array of objects and schemas

`[definition]`
- [options]«Object»

`[options]`

«NodeJS EventEmitter»

- «NodeJS EventEmitter»

[«NodeJS EventEmitter»](https://nodejs.org/api/events.html#class-eventemitter)


Schema constructor.


#### Example:

[Example:](#example)


```javascript
constchild =newSchema({name:String});constschema =newSchema({name:String,age:Number,children: [child] });constTree= mongoose.model('Tree', schema);// setting schema optionsnewSchema({name:String}, {id:false,autoIndex:false})
```


#### Options:

[Options:](#options)


autoIndex: bool - defaults to null (which means use the connection's autoIndex option)autoCreate: bool - defaults to null (which means use the connection's autoCreate option)bufferCommands: bool - defaults to truebufferTimeoutMS: number - defaults to 10000 (10 seconds). IfbufferCommandsis enabled, the amount of time Mongoose will wait for connectivity to be restablished before erroring out.capped: bool | number | object - defaults to falsecollection: string - no defaultdiscriminatorKey: string - defaults to__tid: bool - defaults to true_id: bool - defaults to trueminimize: bool - controlsdocument#toObjectbehavior when called manually - defaults to trueread: stringreadConcern: object - defaults to null, use to set a defaultread concernfor all queries.writeConcern: object - defaults to null, use to overridethe MongoDB server's default write concern settingsshardKey: object - defaults tonullstrict: bool - defaults to truestrictQuery: bool - defaults to falsetoJSON- object - no defaulttoObject- object - no defaulttypeKey- string - defaults to 'type'validateBeforeSave- bool - defaults totruevalidateModifiedOnly- bool - defaults tofalseversionKey: string or object - defaults to "__v"optimisticConcurrency: bool - defaults to false. Set to true to enableoptimistic concurrency.collation: object - defaults to null (which means use no collation)timeseries: object - defaults to null (which means this schema's collection won't be a timeseries collection)selectPopulatedPaths: boolean - defaults totrueskipVersioning: object - paths to exclude from versioningtimestamps: object or boolean - defaults tofalse. If true, Mongoose addscreatedAtandupdatedAtproperties to your schema and manages those properties for you.pluginTags: array of strings - defaults toundefined. If set and plugin called withtagsoption, will only apply that plugin to schemas with a matching tag.virtuals: object - virtuals to define, alias for.virtual[collectionOptions]: object with options passed tocreateCollection()when callingModel.createCollection()orautoCreateset to true.

- autoIndex: bool - defaults to null (which means use the connection's autoIndex option)

- autoCreate: bool - defaults to null (which means use the connection's autoCreate option)

- bufferCommands: bool - defaults to true

- bufferTimeoutMS: number - defaults to 10000 (10 seconds). IfbufferCommandsis enabled, the amount of time Mongoose will wait for connectivity to be restablished before erroring out.

`bufferCommands`
- capped: bool | number | object - defaults to false

- collection: string - no default

- discriminatorKey: string - defaults to__t

`__t`
- id: bool - defaults to true

- _id: bool - defaults to true

- minimize: bool - controlsdocument#toObjectbehavior when called manually - defaults to true

- read: string

- readConcern: object - defaults to null, use to set a defaultread concernfor all queries.

- writeConcern: object - defaults to null, use to overridethe MongoDB server's default write concern settings

- shardKey: object - defaults tonull

`null`
- strict: bool - defaults to true

- strictQuery: bool - defaults to false

- toJSON- object - no default

- toObject- object - no default

- typeKey- string - defaults to 'type'

- validateBeforeSave- bool - defaults totrue

`true`
- validateModifiedOnly- bool - defaults tofalse

`false`
- versionKey: string or object - defaults to "__v"

- optimisticConcurrency: bool - defaults to false. Set to true to enableoptimistic concurrency.

- collation: object - defaults to null (which means use no collation)

- timeseries: object - defaults to null (which means this schema's collection won't be a timeseries collection)

- selectPopulatedPaths: boolean - defaults totrue

`true`
- skipVersioning: object - paths to exclude from versioning

- timestamps: object or boolean - defaults tofalse. If true, Mongoose addscreatedAtandupdatedAtproperties to your schema and manages those properties for you.

`false`
`createdAt`
`updatedAt`
- pluginTags: array of strings - defaults toundefined. If set and plugin called withtagsoption, will only apply that plugin to schemas with a matching tag.

`undefined`
`tags`
- virtuals: object - virtuals to define, alias for.virtual

`.virtual`
- [collectionOptions]: object with options passed tocreateCollection()when callingModel.createCollection()orautoCreateset to true.

`createCollection()`
`Model.createCollection()`
`autoCreate`

#### Options for Nested Schemas:

[Options for Nested Schemas:](#options-for-nested-schemas)


excludeIndexes: bool - defaults tofalse. Iftrue, skip building indexes on this schema's paths.

- excludeIndexes: bool - defaults tofalse. Iftrue, skip building indexes on this schema's paths.

`excludeIndexes`
`false`
`true`

#### Note:

[Note:](#note)


When nesting schemas, (childrenin the example above), always declare the child schema first before passing it into its parent.

`children`

### Schema.Types

[Schema.Types](#Schema.Types)

`Schema.Types`

«property»

- «property»


The various built-in Mongoose Schema Types.


#### Example:

[Example:](#example)


```javascript
constmongoose =require('mongoose');constObjectId= mongoose.Schema.Types.ObjectId;
```


#### Types:

[Types:](#types)


StringNumberBoolean| BoolArrayBufferDateObjectId| OidMixedUUIDBigInt

- String

- Number

- Boolean| Bool

- Array

- Buffer

- Date

- ObjectId| Oid

- Mixed

- UUID

- BigInt


Using this exposed access to theMixedSchemaType, we can use them in our schema.

`Mixed`

```javascript
constMixed= mongoose.Schema.Types.Mixed;newmongoose.Schema({_user:Mixed})
```


### Schema.indexTypes

[Schema.indexTypes](#Schema.indexTypes)

`Schema.indexTypes`

«property»

- «property»


The allowed index types


### Schema.prototype.add()

[Schema.prototype.add()](#Schema.prototype.add())

`Schema.prototype.add()`

obj«Object|Schema»plain object with paths to add, or another schema[prefix]«String»path to prefix the newly added paths with

- obj«Object|Schema»plain object with paths to add, or another schema

`obj`
- [prefix]«String»path to prefix the newly added paths with

`[prefix]`

«Schema»the Schema instance

- «Schema»the Schema instance


Adds key path / schema type pairs to this schema.


#### Example:

[Example:](#example)


```javascript
constToySchema=newSchema();ToySchema.add({name:'string',color:'string',price:'number'});constTurboManSchema=newSchema();// You can also `add()` another schema and copy over all paths, virtuals,// getters, setters, indexes, methods, and statics.TurboManSchema.add(ToySchema).add({year:Number});
```


### Schema.prototype.alias()

[Schema.prototype.alias()](#Schema.prototype.alias())

`Schema.prototype.alias()`

path«String»real path to aliasalias«String|Array[String]»the path(s) to use as an alias forpath

- path«String»real path to alias

`path`
- alias«String|Array[String]»the path(s) to use as an alias forpath

`alias`
`path`

«Schema»the Schema instance

- «Schema»the Schema instance


Add an alias forpath. This means getting or setting thealiasis equivalent to getting or setting thepath.

`path`
`alias`
`path`

#### Example:

[Example:](#example)


```javascript
consttoySchema =newSchema({n:String});// Make 'name' an alias for 'n'toySchema.alias('n','name');constToy= mongoose.model('Toy', toySchema);constturboMan =newToy({n:'Turbo Man'});

turboMan.name;// 'Turbo Man'turboMan.n;// 'Turbo Man'turboMan.name='Turbo Man Action Figure';
turboMan.n;// 'Turbo Man Action Figure'awaitturboMan.save();// Saves { _id: ..., n: 'Turbo Man Action Figure' }
```


### Schema.prototype.childSchemas

[Schema.prototype.childSchemas](#Schema.prototype.childSchemas)

`Schema.prototype.childSchemas`

«property»

- «property»


Array of child schemas (from document arrays and single nested subdocs)
and their corresponding compiled models. Each element of the array is
an object with 2 properties:schemaandmodel.

`schema`
`model`

This property is typically only useful for plugin authors and advanced users.
You do not need to interact with this property at all to use mongoose.


### Schema.prototype.clearIndexes()

[Schema.prototype.clearIndexes()](#Schema.prototype.clearIndexes())

`Schema.prototype.clearIndexes()`

«Schema»the Schema instance

- «Schema»the Schema instance


Remove all indexes from this schema.


clearIndexes only removes indexes from your schema object. Doesnotaffect the indexes
in MongoDB.


#### Example:

[Example:](#example)


```javascript
constToySchema=newSchema({name:String,color:String,price:Number});ToySchema.index({name:1});ToySchema.index({color:1});// Remove all indexes on this schemaToySchema.clearIndexes();ToySchema.indexes();// []
```


### Schema.prototype.clone()

[Schema.prototype.clone()](#Schema.prototype.clone())

`Schema.prototype.clone()`

«Schema»the cloned schema

- «Schema»the cloned schema


Returns a deep copy of the schema


#### Example:

[Example:](#example)


```javascript
constschema =newSchema({name:String});constclone = schema.clone();
clone === schema;// falseclone.path('name');// SchemaString { ... }
```


### Schema.prototype.discriminator()

[Schema.prototype.discriminator()](#Schema.prototype.discriminator())

`Schema.prototype.discriminator()`

name«String»the name of the discriminatorschema«Schema»the discriminated Schema[options]«Object»discriminator options[options.value]«String»the string stored in thediscriminatorKeyproperty. If not specified, Mongoose uses thenameparameter.[options.clone=true]«Boolean»By default,discriminator()clones the givenschema. Set tofalseto skip cloning.[options.overwriteModels=false]«Boolean»by default, Mongoose does not allow you to define a discriminator with the same name as another discriminator. Set this to allow overwriting discriminators with the same name.[options.mergeHooks=true]«Boolean»By default, Mongoose merges the base schema's hooks with the discriminator schema's hooks. Set this option tofalseto make Mongoose use the discriminator schema's hooks instead.[options.mergePlugins=true]«Boolean»By default, Mongoose merges the base schema's plugins with the discriminator schema's plugins. Set this option tofalseto make Mongoose use the discriminator schema's plugins instead.

- name«String»the name of the discriminator

`name`
- schema«Schema»the discriminated Schema

`schema`
- [options]«Object»discriminator options

`[options]`

[options.value]«String»the string stored in thediscriminatorKeyproperty. If not specified, Mongoose uses thenameparameter.

- [options.value]«String»the string stored in thediscriminatorKeyproperty. If not specified, Mongoose uses thenameparameter.

`[options.value]`
`discriminatorKey`
`name`

[options.clone=true]«Boolean»By default,discriminator()clones the givenschema. Set tofalseto skip cloning.

- [options.clone=true]«Boolean»By default,discriminator()clones the givenschema. Set tofalseto skip cloning.

`[options.clone=true]`
`discriminator()`
`schema`
`false`

[options.overwriteModels=false]«Boolean»by default, Mongoose does not allow you to define a discriminator with the same name as another discriminator. Set this to allow overwriting discriminators with the same name.

- [options.overwriteModels=false]«Boolean»by default, Mongoose does not allow you to define a discriminator with the same name as another discriminator. Set this to allow overwriting discriminators with the same name.

`[options.overwriteModels=false]`

[options.mergeHooks=true]«Boolean»By default, Mongoose merges the base schema's hooks with the discriminator schema's hooks. Set this option tofalseto make Mongoose use the discriminator schema's hooks instead.

- [options.mergeHooks=true]«Boolean»By default, Mongoose merges the base schema's hooks with the discriminator schema's hooks. Set this option tofalseto make Mongoose use the discriminator schema's hooks instead.

`[options.mergeHooks=true]`
`false`

[options.mergePlugins=true]«Boolean»By default, Mongoose merges the base schema's plugins with the discriminator schema's plugins. Set this option tofalseto make Mongoose use the discriminator schema's plugins instead.

- [options.mergePlugins=true]«Boolean»By default, Mongoose merges the base schema's plugins with the discriminator schema's plugins. Set this option tofalseto make Mongoose use the discriminator schema's plugins instead.

`[options.mergePlugins=true]`
`false`

«Schema»the Schema instance

- «Schema»the Schema instance


Inherit a Schema by applying a discriminator on an existing Schema.


#### Example:

[Example:](#example)


```javascript
consteventSchema =newmongoose.Schema({timestamp:Date}, {discriminatorKey:'kind'});constclickedEventSchema =newmongoose.Schema({element:String}, {discriminatorKey:'kind'});constClickedModel= eventSchema.discriminator('clicked', clickedEventSchema);constEvent= mongoose.model('Event', eventSchema);Event.discriminators['clicked'];// Model { clicked }constdoc =awaitEvent.create({kind:'clicked',element:'#hero'});
doc.element;// '#hero'docinstanceofClickedModel;// true
```


### Schema.prototype.eachPath()

[Schema.prototype.eachPath()](#Schema.prototype.eachPath())

`Schema.prototype.eachPath()`

fn«Function»callback function

- fn«Function»callback function

`fn`

«Schema»this

- «Schema»this


Iterates the schemas paths similar to Array#forEach.


The callback is passed the pathname and the schemaType instance.


#### Example:

[Example:](#example)


```javascript
constuserSchema =newSchema({name:String,registeredAt:Date});
userSchema.eachPath((pathname, schematype) =>{// Prints twice:// name SchemaString { ... }// registeredAt SchemaDate { ... }console.log(pathname, schematype);
});
```


### Schema.prototype.get()

[Schema.prototype.get()](#Schema.prototype.get())

`Schema.prototype.get()`

key«String»The name of the Option to get the current value for

- key«String»The name of the Option to get the current value for

`key`

«Any»the option's value

- «Any»the option's value


Gets a schema option.


#### Example:

[Example:](#example)


```javascript
schema.get('strict');// trueschema.set('strict',false);
schema.get('strict');// false
```


### Schema.prototype.index()

[Schema.prototype.index()](#Schema.prototype.index())

`Schema.prototype.index()`

fields«Object»The Fields to index, with the order, available values:1 | -1 | '2d' | '2dsphere' | 'geoHaystack' | 'hashed' | 'text'[options]«Object»Options to pass toMongoDB driver'screateIndex()function[options.expires=null]«String|number»Mongoose-specific syntactic sugar, usesmsto convertexpiresoption into seconds for theexpireAfterSecondsin the above link.[options.language_override=null]«String»Tells mongodb to use the specified field instead oflanguagefor parsing text indexes.

- fields«Object»The Fields to index, with the order, available values:1 | -1 | '2d' | '2dsphere' | 'geoHaystack' | 'hashed' | 'text'

`fields`
`1 | -1 | '2d' | '2dsphere' | 'geoHaystack' | 'hashed' | 'text'`
- [options]«Object»Options to pass toMongoDB driver'screateIndex()function

`[options]`
`createIndex()`

[options.expires=null]«String|number»Mongoose-specific syntactic sugar, usesmsto convertexpiresoption into seconds for theexpireAfterSecondsin the above link.

- [options.expires=null]«String|number»Mongoose-specific syntactic sugar, usesmsto convertexpiresoption into seconds for theexpireAfterSecondsin the above link.

`[options.expires=null]`
`expires`
`expireAfterSeconds`

[options.language_override=null]«String»Tells mongodb to use the specified field instead oflanguagefor parsing text indexes.

- [options.language_override=null]«String»Tells mongodb to use the specified field instead oflanguagefor parsing text indexes.

`[options.language_override=null]`
`language`

Defines an index (most likely compound) for this schema.


#### Example:

[Example:](#example)


```javascript
schema.index({first:1,last: -1})
```


### Schema.prototype.indexes()

[Schema.prototype.indexes()](#Schema.prototype.indexes())

`Schema.prototype.indexes()`

«Array»list of indexes defined in the schema

- «Array»list of indexes defined in the schema


Returns a list of indexes that this schema declares, viaschema.index()or byindex: truein a path's options.
Indexes are expressed as an array[spec, options].

`schema.index()`
`index: true`
`[spec, options]`

#### Example:

[Example:](#example)


```javascript
constuserSchema =newSchema({email: {type:String,required:true,unique:true},registeredAt: {type:Date,index:true}
});// [ [ { email: 1 }, { unique: true, background: true } ],//   [ { registeredAt: 1 }, { background: true } ] ]userSchema.indexes();
```


Pluginscan use the return value of this function to modify a schema's indexes.
For example, the below plugin makes every index unique by default.

[Plugins](/docs/plugins.html)


```javascript
functionmyPlugin(schema) {for(constindexofschema.indexes()) {if(index[1].unique===undefined) {
      index[1].unique=true;
    }
  }
}
```


### Schema.prototype.loadClass()

[Schema.prototype.loadClass()](#Schema.prototype.loadClass())

`Schema.prototype.loadClass()`

model«Function»The Class to load[virtualsOnly]«Boolean»if truthy, only pulls virtuals from the class, not methods or statics

- model«Function»The Class to load

`model`
- [virtualsOnly]«Boolean»if truthy, only pulls virtuals from the class, not methods or statics

`[virtualsOnly]`

Loads an ES6 class into a schema. Mapssetters+getters,static methods,
andinstance methodsto schemavirtuals,statics, andmethods.

[setters](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/set)

[getters](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/get)

[static methods](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes/static)

[instance methods](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes#Class_body_and_method_definitions)

[virtuals](/docs/guide.html#virtuals)

[statics](/docs/guide.html#statics)

[methods](/docs/guide.html#methods)


#### Example:

[Example:](#example)


```javascript
constmd5 =require('md5');constuserSchema =newSchema({email:String});classUserClass{// `gravatarImage` becomes a virtualgetgravatarImage() {consthash =md5(this.email.toLowerCase());return`https://www.gravatar.com/avatar/${hash}`;
  }// `getProfileUrl()` becomes a document methodgetProfileUrl() {return`https://mysite.com/${this.email}`;
  }// `findByEmail()` becomes a staticstaticfindByEmail(email) {returnthis.findOne({ email });
  }
}// `schema` will now have a `gravatarImage` virtual, a `getProfileUrl()` method,// and a `findByEmail()` staticuserSchema.loadClass(UserClass);
```


### Schema.prototype.method()

[Schema.prototype.method()](#Schema.prototype.method())

`Schema.prototype.method()`

name«String|Object»The Method Name for a single function, or a Object of "string-function" pairs.[fn]«Function»The Function in a single-function definition.

- name«String|Object»The Method Name for a single function, or a Object of "string-function" pairs.

`name`
- [fn]«Function»The Function in a single-function definition.

`[fn]`

Adds an instance method to documents constructed from Models compiled from this schema.


#### Example:

[Example:](#example)


```javascript
constschema = kittySchema =newSchema(..);

schema.method('meow',function() {console.log('meeeeeoooooooooooow');
})constKitty= mongoose.model('Kitty', schema);constfizz =newKitty;
fizz.meow();// meeeeeooooooooooooow
```


If a hash of name/fn pairs is passed as the only argument, each name/fn pair will be added as methods.


```javascript
schema.method({purr:function() {}
  ,scratch:function() {}
});// laterconstfizz =newKitty;
fizz.purr();
fizz.scratch();
```


NOTE:Schema.method()adds instance methods to theSchema.methodsobject. You can also add instance methods directly to theSchema.methodsobject as seen in theguide

`Schema.method()`
`Schema.methods`
`Schema.methods`
[guide](/docs/guide.html#methods)


### Schema.prototype.obj

[Schema.prototype.obj](#Schema.prototype.obj)

`Schema.prototype.obj`

«property»

- «property»


The original object passed to the schema constructor


#### Example:

[Example:](#example)


```javascript
constschema =newSchema({a:String}).add({b:String});
schema.obj;// { a: String }
```


### Schema.prototype.omit()

[Schema.prototype.omit()](#Schema.prototype.omit())

`Schema.prototype.omit()`

paths«Array[String]»List of Paths to omit for the new Schema[options]«Object»Options to pass to the new Schema Constructor (same asnew Schema(.., Options)). Defaults tothis.optionsif not set.

- paths«Array[String]»List of Paths to omit for the new Schema

`paths`
- [options]«Object»Options to pass to the new Schema Constructor (same asnew Schema(.., Options)). Defaults tothis.optionsif not set.

`[options]`
`new Schema(.., Options)`
`this.options`

«Schema»

- «Schema»


Returns a new schema that has thepathsfrom the original schema, minus the omitted ones.

`paths`

This method is analagous toLodash'somit()functionfor Mongoose schemas.

[Lodash'somit()function](https://lodash.com/docs/#omit)

`omit()`

#### Example:

[Example:](#example)


```javascript
constschema =Schema({name:String,age:Number});// Creates a new schema omitting the `age` pathconstnewSchema = schema.omit(['age']);

newSchema.path('name');// SchemaString { ... }newSchema.path('age');// undefined
```


### Schema.prototype.path()

[Schema.prototype.path()](#Schema.prototype.path())

`Schema.prototype.path()`

path«String»The name of the Path to get / set[obj]«Object»The Type to set the path to, if provided the path will be SET, otherwise the path will be GET

- path«String»The name of the Path to get / set

`path`
- [obj]«Object»The Type to set the path to, if provided the path will be SET, otherwise the path will be GET

`[obj]`

Gets/sets schema paths.


Sets a path (if arity 2)
Gets a path (if arity 1)


#### Example:

[Example:](#example)


```javascript
schema.path('name')// returns a SchemaTypeschema.path('name',Number)// changes the schemaType of `name` to Number
```


### Schema.prototype.pathType()

[Schema.prototype.pathType()](#Schema.prototype.pathType())

`Schema.prototype.pathType()`

path«String»

- path«String»

`path`

«String»

- «String»


Returns the pathType ofpathfor this schema.

`path`

Given a path, returns whether it is a real, virtual, nested, or ad-hoc/undefined path.


#### Example:

[Example:](#example)


```javascript
consts =newSchema({name:String,nested: {foo:String} });
s.virtual('foo').get(() =>42);
s.pathType('name');// "real"s.pathType('nested');// "nested"s.pathType('foo');// "virtual"s.pathType('fail');// "adhocOrUndefined"
```


### Schema.prototype.paths

[Schema.prototype.paths](#Schema.prototype.paths)

`Schema.prototype.paths`

«property»

- «property»


The paths defined on this schema. The keys are the top-level paths
in this schema, and the values are instances of the SchemaType class.


#### Example:

[Example:](#example)


```javascript
constschema =newSchema({name:String}, {_id:false});
schema.paths;// { name: SchemaString { ... } }schema.add({age:Number});
schema.paths;// { name: SchemaString { ... }, age: SchemaNumber { ... } }
```


### Schema.prototype.pick()

[Schema.prototype.pick()](#Schema.prototype.pick())

`Schema.prototype.pick()`

paths«Array[String]»List of Paths to pick for the new Schema[options]«Object»Options to pass to the new Schema Constructor (same asnew Schema(.., Options)). Defaults tothis.optionsif not set.

- paths«Array[String]»List of Paths to pick for the new Schema

`paths`
- [options]«Object»Options to pass to the new Schema Constructor (same asnew Schema(.., Options)). Defaults tothis.optionsif not set.

`[options]`
`new Schema(.., Options)`
`this.options`

«Schema»

- «Schema»


Returns a new schema that has the pickedpathsfrom this schema.

`paths`

This method is analagous toLodash'spick()functionfor Mongoose schemas.

[Lodash'spick()function](https://lodash.com/docs/4.17.15#pick)

`pick()`

#### Example:

[Example:](#example)


```javascript
constschema =Schema({name:String,age:Number});// Creates a new schema with the same `name` path as `schema`,// but no `age` path.constnewSchema = schema.pick(['name']);

newSchema.path('name');// SchemaString { ... }newSchema.path('age');// undefined
```


### Schema.prototype.plugin()

[Schema.prototype.plugin()](#Schema.prototype.plugin())

`Schema.prototype.plugin()`

plugin«Function»The Plugin's callback[opts]«Object»Options to pass to the plugin[opts.deduplicate=false]«Boolean»If true, ignore duplicate plugins (samefnargument using===)

- plugin«Function»The Plugin's callback

`plugin`
- [opts]«Object»Options to pass to the plugin

`[opts]`

[opts.deduplicate=false]«Boolean»If true, ignore duplicate plugins (samefnargument using===)

- [opts.deduplicate=false]«Boolean»If true, ignore duplicate plugins (samefnargument using===)

`[opts.deduplicate=false]`
`fn`
`===`

plugins

- plugins

[plugins](/docs/plugins.html)


Registers a plugin for this schema.


#### Example:

[Example:](#example)


```javascript
consts =newSchema({name:String});
s.plugin(schema=>console.log(schema.path('name').path));
mongoose.model('Test', s);// Prints 'name'
```


Or with Options:


```javascript
consts =newSchema({name:String});
s.plugin((schema, opts) =>console.log(opts.text, schema.path('name').path), {text:"Schema Path Name:"});
mongoose.model('Test', s);// Prints 'Schema Path Name: name'
```


### Schema.prototype.post()

[Schema.prototype.post()](#Schema.prototype.post())

`Schema.prototype.post()`

methodName«String|RegExp|Array[String]»The method name or regular expression to match method name[options]«Object»[options.document]«Boolean»Ifnameis a hook for both document and query middleware, set totrueto run on document middleware.[options.query]«Boolean»Ifnameis a hook for both document and query middleware, set totrueto run on query middleware.fn«Function»callback

- methodName«String|RegExp|Array[String]»The method name or regular expression to match method name

`methodName`
- [options]«Object»

`[options]`

[options.document]«Boolean»Ifnameis a hook for both document and query middleware, set totrueto run on document middleware.

- [options.document]«Boolean»Ifnameis a hook for both document and query middleware, set totrueto run on document middleware.

`[options.document]`
`name`
`true`

[options.query]«Boolean»Ifnameis a hook for both document and query middleware, set totrueto run on query middleware.

- [options.query]«Boolean»Ifnameis a hook for both document and query middleware, set totrueto run on query middleware.

`[options.query]`
`name`
`true`
- fn«Function»callback

`fn`

middlewarekareem

- middleware

[middleware](/docs/middleware.html)

- kareem

[kareem](https://npmjs.org/package/kareem)


Defines a post hook for the document


```javascript
constschema =newSchema(..);
schema.post('save',function(doc) {console.log('this fired after a document was saved');
});

schema.post('find',function(docs) {console.log('this fired after you ran a find query');
});

schema.post(/Many$/,function(res) {console.log('this fired after you ran `updateMany()` or `deleteMany()`');
});constModel= mongoose.model('Model', schema);constm =newModel(..);
m.save(function(err) {console.log('this fires after the `post` hook');
});

m.find(function(err, docs) {console.log('this fires after the post find hook');
});
```


### Schema.prototype.pre()

[Schema.prototype.pre()](#Schema.prototype.pre())

`Schema.prototype.pre()`

methodName«String|RegExp|Array[String]»The method name or regular expression to match method name[options]«Object»[options.document]«Boolean»Ifnameis a hook for both document and query middleware, set totrueto run on document middleware. For example, setoptions.documenttotrueto apply this hook toDocument#deleteOne()rather thanQuery#deleteOne().[options.query]«Boolean»Ifnameis a hook for both document and query middleware, set totrueto run on query middleware.callback«Function»

- methodName«String|RegExp|Array[String]»The method name or regular expression to match method name

`methodName`
- [options]«Object»

`[options]`

[options.document]«Boolean»Ifnameis a hook for both document and query middleware, set totrueto run on document middleware. For example, setoptions.documenttotrueto apply this hook toDocument#deleteOne()rather thanQuery#deleteOne().

- [options.document]«Boolean»Ifnameis a hook for both document and query middleware, set totrueto run on document middleware. For example, setoptions.documenttotrueto apply this hook toDocument#deleteOne()rather thanQuery#deleteOne().

`[options.document]`
`name`
`true`
`options.document`
`true`
`Document#deleteOne()`
`Query#deleteOne()`

[options.query]«Boolean»Ifnameis a hook for both document and query middleware, set totrueto run on query middleware.

- [options.query]«Boolean»Ifnameis a hook for both document and query middleware, set totrueto run on query middleware.

`[options.query]`
`name`
`true`
- callback«Function»

`callback`

Defines a pre hook for the model.


#### Example:

[Example:](#example)


```javascript
consttoySchema =newSchema({name:String,created:Date});

toySchema.pre('save',function(next) {if(!this.created)this.created=newDate;next();
});

toySchema.pre('validate',function(next) {if(this.name!=='Woody')this.name='Woody';next();
});// Equivalent to calling `pre()` on `find`, `findOne`, `findOneAndUpdate`.toySchema.pre(/^find/,function(next) {console.log(this.getFilter());
});// Equivalent to calling `pre()` on `updateOne`, `findOneAndUpdate`.toySchema.pre(['updateOne','findOneAndUpdate'],function(next) {console.log(this.getFilter());
});

toySchema.pre('deleteOne',function() {// Runs when you call `Toy.deleteOne()`});

toySchema.pre('deleteOne', {document:true},function() {// Runs when you call `doc.deleteOne()`});
```


### Schema.prototype.queue()

[Schema.prototype.queue()](#Schema.prototype.queue())

`Schema.prototype.queue()`

name«String»name of the document method to call laterargs«Array»arguments to pass to the method

- name«String»name of the document method to call later

`name`
- args«Array»arguments to pass to the method

`args`

Adds a method call to the queue.


#### Example:

[Example:](#example)


```javascript
schema.methods.print=function() {console.log(this); };
schema.queue('print', []);// Print the doc every one is instantiatedconstModel= mongoose.model('Test', schema);newModel({name:'test'});// Prints '{"_id": ..., "name": "test" }'
```


### Schema.prototype.remove()

[Schema.prototype.remove()](#Schema.prototype.remove())

`Schema.prototype.remove()`

path«String|Array»The Path(s) to remove

- path«String|Array»The Path(s) to remove

`path`

«Schema»the Schema instance

- «Schema»the Schema instance


Removes the givenpath(or [paths]).

`path`
`paths`

#### Example:

[Example:](#example)


```javascript
constschema =newSchema({name:String,age:Number});
schema.remove('name');
schema.path('name');// Undefinedschema.path('age');// SchemaNumber { ... }
```


Or as a Array:


```javascript
schema.remove(['name','age']);
schema.path('name');// Undefinedschema.path('age');// Undefined
```


### Schema.prototype.removeIndex()

[Schema.prototype.removeIndex()](#Schema.prototype.removeIndex())

`Schema.prototype.removeIndex()`

index«Object|string»name or index specification

- index«Object|string»name or index specification

`index`

«Schema»the Schema instance

- «Schema»the Schema instance


Remove an index by name or index specification.


removeIndex only removes indexes from your schema object. Doesnotaffect the indexes
in MongoDB.


#### Example:

[Example:](#example)


```javascript
constToySchema=newSchema({name:String,color:String,price:Number});// Add a new index on { name, color }ToySchema.index({name:1,color:1});// Remove index on { name, color }// Keep in mind that order matters! `removeIndex({ color: 1, name: 1 })` won't remove the indexToySchema.removeIndex({name:1,color:1});// Add an index with a custom nameToySchema.index({color:1}, {name:'my custom index name'});// Remove index by nameToySchema.removeIndex('my custom index name');
```


### Schema.prototype.removeVirtual()

[Schema.prototype.removeVirtual()](#Schema.prototype.removeVirtual())

`Schema.prototype.removeVirtual()`

path«String|Array»The virutal path(s) to remove.

- path«String|Array»The virutal path(s) to remove.

`path`

Removes the given virtual or virtuals from the schema.


### Schema.prototype.requiredPaths()

[Schema.prototype.requiredPaths()](#Schema.prototype.requiredPaths())

`Schema.prototype.requiredPaths()`

invalidate«Boolean»Refresh the cache

- invalidate«Boolean»Refresh the cache

`invalidate`

«Array»

- «Array»


Returns an Array of path strings that are required by this schema.


#### Example:

[Example:](#example)


```javascript
consts =newSchema({name: {type:String,required:true},age: {type:String,required:true},notes:String});
s.requiredPaths();// [ 'age', 'name' ]
```


### Schema.prototype.searchIndex()

[Schema.prototype.searchIndex()](#Schema.prototype.searchIndex())

`Schema.prototype.searchIndex()`

description«Object»index options, includingnameanddefinitiondescription.name«String»description.definition«Object»

- description«Object»index options, includingnameanddefinition

`description`
`name`
`definition`
- description.name«String»

`description.name`
- description.definition«Object»

`description.definition`

«Schema»the Schema instance

- «Schema»the Schema instance


Add anAtlas search indexthat Mongoose will create usingModel.createSearchIndex().
This function only works when connected to MongoDB Atlas.

[Atlas search index](https://www.mongodb.com/docs/atlas/atlas-search/create-index/)

`Model.createSearchIndex()`

#### Example:

[Example:](#example)


```javascript
constToySchema=newSchema({name:String,color:String,price:Number});ToySchema.searchIndex({name:'test',definition: {mappings: {dynamic:true} } });
```


### Schema.prototype.set()

[Schema.prototype.set()](#Schema.prototype.set())

`Schema.prototype.set()`

key«String»The name of the option to set the value to[value]«Object»The value to set the option to, if not passed, the option will be reset to default[tags]«Array<string>»tags to add to read preference if key === 'read'

- key«String»The name of the option to set the value to

`key`
- [value]«Object»The value to set the option to, if not passed, the option will be reset to default

`[value]`
- [tags]«Array<string>»tags to add to read preference if key === 'read'

`[tags]`

Schema

- Schema

[Schema](#Schema())


Sets a schema option.


#### Example:

[Example:](#example)


```javascript
schema.set('strict');// 'true' by defaultschema.set('strict',false);// Sets 'strict' to falseschema.set('strict');// 'false'
```


### Schema.prototype.static()

[Schema.prototype.static()](#Schema.prototype.static())

`Schema.prototype.static()`

name«String|Object»The Method Name for a single function, or a Object of "string-function" pairs.[fn]«Function»The Function in a single-function definition.

- name«String|Object»The Method Name for a single function, or a Object of "string-function" pairs.

`name`
- [fn]«Function»The Function in a single-function definition.

`[fn]`

Statics

- Statics

[Statics](/docs/guide.html#statics)


Adds static "class" methods to Models compiled from this schema.


#### Example:

[Example:](#example)


```javascript
constschema =newSchema(..);// Equivalent to `schema.statics.findByName = function(name) {}`;schema.static('findByName',function(name) {returnthis.find({name: name });
});constDrink= mongoose.model('Drink', schema);awaitDrink.findByName('LaCroix');
```


If a hash of name/fn pairs is passed as the only argument, each name/fn pair will be added as methods.


```javascript
schema.static({findByName:function() {..}
  ,findByCost:function() {..}
});constDrink= mongoose.model('Drink', schema);awaitDrink.findByName('LaCroix');awaitDrink.findByCost(3);
```


If a hash of name/fn pairs is passed as the only argument, each name/fn pair will be added as statics.


### Schema.prototype.virtual()

[Schema.prototype.virtual()](#Schema.prototype.virtual())

`Schema.prototype.virtual()`

name«String»The name of the Virtual[options]«Object»[options.ref]«String|Model»model name or model instance. Marks this as apopulate virtual.[options.localField]«String|Function»Required for populate virtuals. Seepopulate virtual docsfor more information.[options.foreignField]«String|Function»Required for populate virtuals. Seepopulate virtual docsfor more information.[options.justOne=false]«Boolean|Function»Only works with populate virtuals. Iftruthy, will be a single doc ornull. Otherwise, the populate virtual will be an array.[options.count=false]«Boolean»Only works with populate virtuals. Iftruthy, this populate virtual will contain the number of documents rather than the documents themselves when youpopulate().[options.get=null]«Function|null»Adds agetterto this virtual to transform the populated doc.[options.match=null]«Object|Function»Apply a defaultmatchoption to populate, adding an additional filter to the populate query.[options.applyToArray=false]«Boolean»If true and the givennameis a direct child of an array, apply the virtual to the array rather than the elements.

- name«String»The name of the Virtual

`name`
- [options]«Object»

`[options]`

[options.ref]«String|Model»model name or model instance. Marks this as apopulate virtual.

- [options.ref]«String|Model»model name or model instance. Marks this as apopulate virtual.

`[options.ref]`

[options.localField]«String|Function»Required for populate virtuals. Seepopulate virtual docsfor more information.

- [options.localField]«String|Function»Required for populate virtuals. Seepopulate virtual docsfor more information.

`[options.localField]`

[options.foreignField]«String|Function»Required for populate virtuals. Seepopulate virtual docsfor more information.

- [options.foreignField]«String|Function»Required for populate virtuals. Seepopulate virtual docsfor more information.

`[options.foreignField]`

[options.justOne=false]«Boolean|Function»Only works with populate virtuals. Iftruthy, will be a single doc ornull. Otherwise, the populate virtual will be an array.

- [options.justOne=false]«Boolean|Function»Only works with populate virtuals. Iftruthy, will be a single doc ornull. Otherwise, the populate virtual will be an array.

`[options.justOne=false]`
`null`

[options.count=false]«Boolean»Only works with populate virtuals. Iftruthy, this populate virtual will contain the number of documents rather than the documents themselves when youpopulate().

- [options.count=false]«Boolean»Only works with populate virtuals. Iftruthy, this populate virtual will contain the number of documents rather than the documents themselves when youpopulate().

`[options.count=false]`
`populate()`

[options.get=null]«Function|null»Adds agetterto this virtual to transform the populated doc.

- [options.get=null]«Function|null»Adds agetterto this virtual to transform the populated doc.

`[options.get=null]`

[options.match=null]«Object|Function»Apply a defaultmatchoption to populate, adding an additional filter to the populate query.

- [options.match=null]«Object|Function»Apply a defaultmatchoption to populate, adding an additional filter to the populate query.

`[options.match=null]`
`match`

[options.applyToArray=false]«Boolean»If true and the givennameis a direct child of an array, apply the virtual to the array rather than the elements.

- [options.applyToArray=false]«Boolean»If true and the givennameis a direct child of an array, apply the virtual to the array rather than the elements.

`[options.applyToArray=false]`
`name`

«VirtualType»

- «VirtualType»


Creates a virtual type with the given name.


### Schema.prototype.virtualpath()

[Schema.prototype.virtualpath()](#Schema.prototype.virtualpath())

`Schema.prototype.virtualpath()`

name«String»The name of the Virtual to get

- name«String»The name of the Virtual to get

`name`

«VirtualType,null»

- «VirtualType,null»


Returns the virtual type with the givenname.

`name`

### Schema.prototype.virtuals

[Schema.prototype.virtuals](#Schema.prototype.virtuals)

`Schema.prototype.virtuals`

«property»

- «property»


Object containing all virtuals defined on this schema.
The objects' keys are the virtual paths and values are instances ofVirtualType.

`VirtualType`

This property is typically only useful for plugin authors and advanced users.
You do not need to interact with this property at all to use mongoose.


#### Example:

[Example:](#example)


```javascript
constschema =newSchema({});
schema.virtual('answer').get(() =>42);console.log(schema.virtuals);// { answer: VirtualType { path: 'answer', ... } }console.log(schema.virtuals['answer'].getters[0].call());// 42
```


### Schema.reserved

[Schema.reserved](#Schema.reserved)

`Schema.reserved`

«property»

- «property»


Reserved document keys.


Keys in this object are names that are warned in schema declarations
because they have the potential to break Mongoose/ Mongoose plugins functionality. If you create a schema
usingnew Schema()with one of these property names, Mongoose will log a warning.

`new Schema()`

_posts_prescollectionemiterrorsgetinitisModifiedisNewlistenersmodelNameononcepopulatedprototyperemoveremoveListenersaveschematoObjectvalidate

- _posts

- _pres

- collection

- emit

- errors

- get

- init

- isModified

- isNew

- listeners

- modelName

- on

- once

- populated

- prototype

- remove

- removeListener

- save

- schema

- toObject

- validate


NOTE:Use of these terms as method names is permitted, but play at your own risk, as they may be existing mongoose document methods you are stomping on.


```javascript
constschema =newSchema(..);
 schema.methods.init=function() {}// potentially breaking
```


[Source](https://mongoosejs.com/docs/api/schema.html#Schema())