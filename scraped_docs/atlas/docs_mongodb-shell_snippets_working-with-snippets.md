# Use Snippets in the Console - MongoDB Shell


Docs Home / MongoDB Shell / Snippets Use Snippets in the Console On this page Install Snippet Packages Run a Snippet Uninstall Snippets Find Available Snippet Packages Get Repository Information Get Help for a Snippet Warning This feature is experimental. MongoDB does not provide support for
Snippets. This feature may be changed or removed at any time without
prior notice. Bugs are not expected, however should you encounter one, please open an
issue in the GitHub repository for this project. This page is an overview of working with snippets in the mongosh console. Install Snippet Packages You must install a snippet package before you use it. Once a snippet
package has been installed, it is loaded each time mongosh starts. If you know the name of the snippet you want to install, enter: snippet install < name > Otherwise, search the repository to get a list of available snippets. snippet search Once the snippet is installed, enter y to load it. Running install ... Installed new snippets analyze - schema. Do you want to load them now ? [ Y / n] : y Finished installing snippets : analyze - schema Note If this is the first time you have used snippets you may see a
warning like the following: This operation requires downloading a recent release of npm. Do you want to proceed ? [ Y / n] : You must install npm to use snippets. Run a Snippet Before running a new snippet, run snippet help <SNIPPET NAME> to
learn more about the snippet's functionality. For example, snippet help analyze-schema indicates that you can
use the the analyze-schema by passing it a collection name. testDB > snippet help analyze - schema # analyze - schema Analyze the schema of a collection or a cursor. `` `js > schema(db.coll); âââââââââââ¬ââââââââ¬ââââââââââââ¬âââââââââââââ â (index) â   0   â     1     â     2      â âââââââââââ¼ââââââââ¼ââââââââââââ¼âââââââââââââ¤ â    0    â '_id' â '100.0 %' â 'ObjectID' â â    1    â 'a  ' â '50.0 %'  â  'Number'  â â    2    â 'a  ' â '50.0 %'  â  'String'  â âââââââââââ´ââââââââ´ââââââââââââ´âââââââââââââ Once you know how to call a snippet, you can use it as in the following
example. Consider the reservations collection: db. reservations . insertMany ( [ { "_id" : 1001 , "roomNum" : 1 , "reserved" : true } , { "_id" : 1002 , "roomNum" : 2 , "reserved" : true } , { "_id" : 1003 , "roomNum" : 3 , "reserved" : "false" } , { "_id" : 1004 , "roomNum" : 4 , "reserved" : true } , ] ) To analyze the collection, install the analyze-schema snippet if it is not already present, pass in the
collection name to run it. snippet install analyze - schema schema ( db. reservations ) The document with "_id": 3 was misentered as a string. The analysis
shows that the reserved field has string elements in addition to
the expected booleans. âââââââââââ¬âââââââââââââ¬ââââââââââââ¬ââââââââââââ â (index) â     0      â     1     â     2     â âââââââââââ¼âââââââââââââ¼ââââââââââââ¼ââââââââââââ¤ â    0    â '_id     ' â '100.0 %' â 'Number'  â â    1    â 'reserved' â '75.0 %'  â 'Boolean' â â    2    â 'reserved' â '25.0 %'  â 'String'  â â    3    â 'roomNum ' â '100.0 %' â 'Number'  â âââââââââââ´âââââââââââââ´ââââââââââââ´ââââââââââââ Uninstall Snippets Use the snippet uninstall command to remove a snippet. If you are
unsure of the name, the snippet ls command lists all installed
snippets. This code uninstalls the analyze-schema snippet. snippet uninstall analyze - schema Find Available Snippet Packages The snippet ls command returns a list of locally installed snippets
along with some version and source information. snippets@ /root/.mongodb/mongosh/snippets âââ mongosh:PRIVATE..DecryptCards@1.0.5 âââ mongosh:analyze-schema@1.0.5 âââ npm@7.23.0 To see the snippets that are available in the registry, first refresh the local metadata cache and then search . snippet refresh snippet search snippet search lists available snippets, their version, and gives a
brief description. This instance has a second, private registry configured. Since the
private registry was listed first, those snippets precede the MongoDB
snippets in the list of available snippets. âââââââââââ¬ââââââââââââââââââââââââââââââââââ¬ââââââââââ¬âââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ â ( index) â              name               â version â                          description                           â âââââââââââ¼ââââââââââââââââââââââââââââââââââ¼ââââââââââ¼âââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ¤ â 0 â 'PRIVATE..DecryptCards' â '1.0.5' â 'Decrypt credit card numbers' â â 1 â 'PRIVATE..updateAuthentication' â '1.0.2' â 'Update user pwds and authentication' â â 2 â 'resumetoken' â '1.0.2' â 'Resume token decoder script' â â 3 â 'mongocompat' â '1.0.7' â 'mongo compatibility script for mongosh' â â 4 â 'spawn-mongod' â '1.0.1' â 'Spin up a local mongod process' â â 5 â 'mock-collection' â '1.0.2' â 'mockCollection([{ a: 1 }, { a: 2 }]).find({ a: { $gt: 2 } })' â â 6 â 'analyze-schema' â '1.0.5' â 'schema(db.coll)' â âââââââââââ´ââââââââââââââââââââââââââââââââââ´ââââââââââ´âââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ Get Repository Information Display the homepage and URL for each snippet repository: snippet info The output lists each repository. Snippet repository URL : https : //github.com/YOUR_COMPANY/YOUR_REPO_PATH/index.bson.br - - > Homepage : https : //davemungo.github.io/mongosh-snippets/ Snippet repository URL : https : //compass.mongodb.com/mongosh/snippets-index.bson.br - - > Homepage : https : //github.com/mongodb-labs/mongosh-snippets Get Help for a Snippet Each snippet is unique and has its own interface. The best way to find
information about how a particular snippet works is to view its README file by running snippet help : snippet help mongocompat This command displays the README file for the mongocompat snippet in the mongosh console. # mongocompat Provide `mongo` legacy shell compatibility APIs . `` `js > Array.sum([1, 2, 3]) 6 > tojsononeline({a:1,b:2,c:3}) {  "a" : 1,  "b" : 2,  "c" : 3 } ` `` When you create your own your own snippet
packages, be sure to include a README.md file that provides useful
help. Back Snippets Next Create & Share
